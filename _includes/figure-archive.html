
{%- assign path = include.path | remove: ".jpg" | remove: ".jpeg" | remove: ".png" | remove: ".tiff" | remove: ".JPG" -%}

<figure>

  <picture>
    <!-- {% for i in site.imagemagick.widths -%}
      <source media="(max-width: {{ i }}px)" srcset="{{ path | relative_url }}-{{ i }}.webp" />
    {% endfor -%} -->

    <!-- IMPORTANT: Small versions of the images must be in jpg format. -->
    <!--

        TODO: Find a way to extract file extension from the original path so that we can keep small versions in different file formats.
        TODO: Find a way to modify data-title color style from somewhere else more elegant.
    -->

    <a href="{{ include.path | relative_url }}" data-lightbox="s" data-title="<p style='color:#ffffff;'>{{archive.description}}</p>">
    <!-- Fallback to the original file -->
    <img class="img-arc"  {% if include.class %}class="{{ include.class }}"{% endif %} src="{{ path | append: '-small.jpg' | | relative_url }}" {% if include.alt %}alt="{{ include.alt }}"{% endif %} {% if include.title %}title="{{ include.title }}"{% endif %} {% if include.zoomable %}data-zoomable{% endif %} />
</a>
  </picture>

  {%- if include.caption -%}<figcaption class="caption">{{ include.caption }}</figcaption>{%- endif %}

</figure>
